+++
title = '利用傳紙條理解 IP、Port、SSL'
date = 2024-06-08T12:13:00+08:00
draft = false
+++

(以下故事純屬虛構，如有雷同純屬巧合)

## 第一集: 草創

小黑是國語實驗小學附設高級中學的學生，也是電子計算機研究社的一員。

某天英文課裡，戴著三層口罩和墨鏡的英文老師在講台上畫 English4U 文章的心智圖。身為英文白癡的小黑不想理會上課內容，於是決定打開了學資開始卷數學。但他被學資噁心的題目電爛了，於是做起了白日夢來。

突然，一個奇妙的點子突然飄進小黑腦中：

「為什麼不來做一個校內的通訊系統呢? 如此一來，我就能認識其他班的新朋友了。」

小黑是個不折不扣的大社恐，校內的朋友只局限於電研、劍道社和班上，其他班的人幾乎完全不認識。

「好！就來做吧！」於是小黑決定開始研究這酷酷的玩具。

經過一陣子的研究調查，小黑設計了一個傳紙條的通訊系統。使用者寫好紙條後，只要交給小黑在各班高薪聘請的信差運送，紙條就能送到學校任何地方。有了這個系統，約遠在自強樓的同學打球、和三年級的學長聊天、甚至下西洋棋都不在話下。

熬夜完成紙條系統後，小黑對此非常自豪，於是在隔天早上決定寫則紙條測試系統的能耐。

在電研眾多大電神中，小黑決定找稱不上熟悉的 kea 出來打排球。於是他寫了如此的一張紙條: 

放學後，小黑在排球場等 kea。等呀等，等呀等，他從四點等到晚上七點，然而 kea 卻連半道影子都沒有，直接讓小黑從排球少年變成排擠少年。

「怎麼又放別人鴿子了? kea 這小子...... 他以為會打競程、彈吉他、打排球、攝影了不起喔! 看我怎麼教訓他!」

隔天中午，小黑帶著 AK 來到 kea 班前，準備跟他討個明白。

「你怎麼不來排球場? 你這小王八羔子!」小黑怒氣沖沖瞪著 kea。

「蛤? 我有跟你約嗎?」kea 疑惑道。

「我有傳紙條給你啊! 不來就算了，還不願承認? 準備慶記吧!」話一說完，小黑便拿起手邊的 AK，瞄準 kea。

「等等你先聽我解釋，我知道問題出在哪了!」

「怎麼可能有問題? 我設計的系統天下無敵!」

「總之你先把你傳的紙條內容寫給我看。」小黑想了想後，拿出一張紙，在上面寫下紙條內容:

> From 小黑 To kea:<br>
>    「下午四點排球場揪嗎?」

「老哥，你覺得其他班的人知道我是 kea 嗎?」

「啊這...你說的好像有點道理。那我該怎麼做呢?」

kea 想了下，拿小黑的紙筆在紙上塗塗改改，隨後把結果展示給他看:

> From 102 第四排第一位 小黑 To 106 第三排第五位 kea:<br>
>     「放學後要打排球嗎? 我在排球場等你」


「這樣就能解決問題了。你等下再使用這個系統看看。」

「太感謝你了!!!!」小黑臉上充滿著仰慕的表情，並默默把手上的 AK 放到地上。

回到班上後，小黑重傳了一次紙條，邀請 kea 打排球。等到放學後，kea 如期來到排球場，並和小黑展開一場男人之間充滿熱血與激情的決鬥，球場裡充滿著快活的空氣。

經過調整後，小黑決定把這個系統命名為「訊息傳送者 3000」，並向校內同學推廣這套系統。過了不久，「訊息傳送者 3000」風靡一時，學校幾乎每個人都使用這套系統傳送訊息，小黑也因此成了學校的風雲人物，結識了不少有趣的朋友。

## 第一集背後的網路概念解釋: IP (Internet Protocol)

第一集故事中，小黑因為不清楚別人不認識 kea 而無法準確傳紙條給 kea。kea 遇到問題後更改了紙條格式，在紙條上標記好「收信者地址」和「發送者地址」，解決了這個問題。這裡 kea 使用的概念對應到網路中為 **IP(Internet Protocol)**。

IP 是一套傳遞訊息的「協定」，只要電腦間遵守這套「協定」，就能保證訊息傳送到特定的目的地(如果網路沒問題的話)。IP 協定中每台電腦都有一個地址，是為 **IP Address**。

## 第二集: 茁壯

「訊息傳送者 3000」在學校的使用日趨廣泛，也為小黑創造了不少效益，可是事情不會持續一帆風順下去。

某天，遠在自強樓的 LAN 前來明道樓找上了小黑。

「這不是 LAN 嗎? 找我有什麼事?」

「都是妳啦! 害全校都知道我是甲了 !」語畢，LAN 作勢要朝小黑臉上打。

「哥能不能先別動武力，至少你總得先讓我知道發生甚麼事吧?全校不是沒人知道你是甲嗎?」

「說的也是。那天，我傳訊息向我很親的好朋友出櫃。我很確定他不會跟別人講，唯一的可能就是你的系統出了差錯!」LAN 臉紅氣喘地說道。

「.....我了解了，我去研究看看這個問題。」有了上次經驗後，小黑明白世界上沒有完好無缺的系統，於是積極聽取使用者的意見。

聽完 LAN 的意見後，小黑馬上又去找了超級大電神 kea，並向他講解來龍去脈。

「欸 kea，你覺得該怎麼解決 LAN 提出的問題?」

聰明如斯的 kea 經過短暫的思考後，給出了回答:

「很簡單啊，你就讓寄信者先加密訊息，之後再讓收信者解密不就好了?」

「我能理解你說的，但我具體要如何執行?」

「首先，你讓寄信者和收信者雙方共通約定好一個數字，比如 2。接著，讓寄信者把訊息轉成注音符號，並把聲母和韻母都往後延 2，這樣 ㄅ 會變成 ㄇ、ㄚ 會變成 ㄜ。最後當收信者拿到消息時，再把聲母和韻母倒退 2 就能得到原本的訊息了。」

「道理我都懂，但這樣似乎有點麻煩......能請你幫我寫一個轉換的程式嗎?」

「好，但你之後要請我飲料~~」

「一言為定。」

解決這個問題後，「訊息傳送者 3000」的使用者越來越多，~~校內也出現愈來愈多的注音文了~~。

小黑在國語實小附中的日子轉眼間就過去三個多月了，校慶也快到了。

小黑覺得這又是另一個不錯的商機，但他腦中卻沒有任何發財的點子。

某天英文課，小黑又在發呆了。

「三號同學，警告一支!」小黑被英文老師的造句嚇醒了。這時，他腦中終於迸出了好點子來：「為何不讓各班攤位提供各自的服務呢？」

於是，小黑開始著手設計紙條。這次小黑不靠電神 kea 的幫助，設計了一個酷酷的格式：

>From 10203 小黑 To 113 餐點：<br>
> 「兩份炒馬麵不要辣。」

這個格式中，使用者只要指定各班提供的服務，該班就會將服務轉送到對應負責的同學，而後便可將所求傳回去。

格式設計完後，小黑向各班推銷這套系統。有了之前愉快的經驗，學校各班都爽快答應了。至於校慶當天系統出了哪些奇怪的包，及女僕小黑如何被各班使喚都是後話了。

## 第二集背後的網路概念解釋: SSL、Port

### SSL

> **只要有兩方傳輸訊息，訊息就有可能被剽竊。**

第二集中 LAN 和其他人之間的對話被別人洩漏出去，原因不外乎中途被外人瞧見。為了解決這個問題，小黑採納了 kea 的建議，也就是先加密再將訊息傳輸過去。

而網路也是依照同個原理傳遞訊息的。前面提到，每台電腦都有一個 IP Address，並以此向彼此傳送資料。但是，總有壞人想攔截資料。要是信用卡資料被駭客竊取了，駭客不就能任意盜刷了嗎？於是，當初那群建立網路的天才工程師想出了一個解決方法：**SSL**

SSL 的原理和第二集中的注音加密法很像：SSL 會先把訊息加密後，再把訊息給到另一邊的使用者或伺服器。但不同的是，注音加密法採用的是**對稱加密**，SSL 採用的是**非對稱加密**。了解這兩者的差異可看[這篇文章](https://medium.com/mr-efacani-teatime/%E5%9C%96%E8%A7%A3-%E9%9D%9E%E5%B0%8D%E7%A8%B1-%E8%88%87-%E5%B0%8D%E7%A8%B1-%E5%8A%A0%E5%AF%86%E6%8A%80%E8%A1%93-37c01f3651dc)，你只需要知道非對稱加密比較安全就行了。

現在你知道為何 Chrome、Firefox 會擋那些沒有 SSL 的網站了。

### Port

電腦能做的事不只有一種，那要如何才能讓別台電腦知道你想做什麼呢？

於是，就有了 Port 的誕生。第二集中，小黑設計的格式能指定每班的服務，例如「佔籃框」、「買飲料」等。Port 即是電腦中的對應機制。

Port 是每台電腦提供的窗口，每個 Port 都會對應到不同的服務。比如 80 是給網頁的 Port、21 是給 FTP(傳輸檔案) 的 Port 等。

Port 的編號從 0 到 65535，根據用途可分為三類: System Ports, 
